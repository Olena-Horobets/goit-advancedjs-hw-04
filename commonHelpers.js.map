{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/fetchApi.js","../src/js/galleryMarkup.js","../src/main.js"],"sourcesContent":["export default {\n  body: document.querySelector('body'),\n\n  searchForm: document.querySelector('#search-form'),\n  resetBtn: document.querySelector('[data-action=\"reset\"]'),\n  loadMoreBtn: document.querySelector('[data-action=\"load-more\"]'),\n  gallery: document.querySelector('#gallery'),\n  message: document.querySelector('.reqest-message'),\n  loading: document.querySelector('.loading-message'),\n};\n","class SearchAPIData {\n  #BASE_URL;\n  #API_KEY;\n\n  constructor({ url, key, perPage }) {\n    this.#BASE_URL = url;\n    this.#API_KEY = key;\n    this._searcQuery = '';\n    this.page = 1;\n    this.perPage = perPage;\n  }\n\n  set searcQuery(value) {\n    this._searcQuery = value;\n  }\n\n  setNextPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  getBasicFetchUrl() {\n    return `${this.#BASE_URL}?key=${this.#API_KEY}&q=${this._searcQuery}&page=${\n      this.page\n    }`;\n  }\n}\n\nclass SearchPhotoData extends SearchAPIData {\n  constructor({ url, key, perPage, imageType, orientation, safesearch }) {\n    super({ url, key, perPage });\n    this.imageType = imageType;\n    this.orientation = orientation;\n    this.safesearch = safesearch;\n  }\n\n  getFetchUrl() {\n    const url = `${this.getBasicFetchUrl()}&per_page=${\n      this.perPage\n    }&image_type=${this.imageType}&orientation=${this.orientation}&safesearch=${\n      this.safesearch\n    }`;\n    return url;\n  }\n}\n\nconst photoFinderOptions = {\n  url: 'https://pixabay.com/api/',\n  key: '22936688-6b3396d854cca2c3f8d0c7d41',\n  perPage: 40,\n  imageType: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nconst photoFinder = new SearchPhotoData({ ...photoFinderOptions });\nexport default photoFinder;\n","export default function galleryItemTpl(arr) {\n  return arr\n    .map(el => {\n      return `<li class=\"gallery-card\">\n      <a href=\"${el.largeImageURL} class=\"gallery__link\">\n        <img\n          class=\"gallery-card__img\"\n          src=\"${el.webformatURL}\"\n          alt=\"${el.tags}\"\n          loading=\"lazy\"\n          id=\"${el.id}\"\n          data-src=\"${el.largeImageURL}\"\n        />\n      </a>\n\n        <div class=\"info\">\n          <div class=\"info__thumb\">\n            <p class=\"info-item\">\n              <span>${el.likes}</span>\n              <span class=\"material-icons\">favorite</span>\n            </p>\n            <p class=\"info-item\">\n              <span>${el.views}</span>\n              <span class=\"material-icons\">visibility</span>\n            </p>\n            <p class=\"info-item\">\n              <span>${el.comments}</span>\n              <span class=\"material-icons\">textsms</span>\n            </p>\n            <p class=\"info-item\">\n              <span>${el.downloads}</span>\n              <span class=\"material-icons\">cloud_download</span>\n            </p>\n          </div>\n\n          <div class=\"blur\" style=\"background-image: url(${el.webformatURL})\"></div>\n        </div>\n  \n</li>`;\n    })\n    .join('');\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport refs from './js/refs.js';\nimport photoFinder from './js/fetchApi.js';\nimport galleryItemTpl from './js/galleryMarkup.js';\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.searchForm.addEventListener('input', e => {\n  refs.resetBtn.disabled = false;\n  refs.resetBtn.addEventListener('click', onReset, { once: true });\n});\n\nfunction onSearch(e) {\n  e.preventDefault();\n  refs.loading.classList.remove('is-hidden');\n\n  const value = e.currentTarget.elements.searchQuery.value.trim();\n  if (value === '') {\n    onServerResponse('error', 'Please, enter valid query!');\n    return;\n  }\n\n  try {\n    refs.resetBtn.disabled = false;\n    refs.resetBtn.addEventListener('click', onReset, { once: true });\n    refs.message.classList.add('is-hidden');\n    onNewFetch(value);\n    fetchAndRender();\n  } catch (err) {\n    onServerResponse('error', 'Please, enter valid query!');\n  }\n}\n\nfunction onServerResponse(cb, message) {\n  refs.loading.classList.add('is-hidden');\n  iziToast[cb]({ message, position: 'topRight' });\n}\n\nfunction onMarkupRender(list) {\n  refs.gallery.insertAdjacentHTML('beforeend', list);\n}\n\nasync function fetchAndRender() {\n  refs.loading.classList.remove('is-hidden');\n\n  await axios(photoFinder.getFetchUrl()).then(({ data }) => {\n    if (data.totalHits === 0) {\n      onServerResponse('warning', `Sorry, we couldn't find anything for you(`);\n      onReset();\n      return;\n    }\n\n    if (data.hits.length < photoFinder.perPage) {\n      onServerResponse(\n        'info',\n        `This was all we had for you, try something else, please`\n      );\n      refs.loadMoreBtn.classList.add('is-hidden');\n      refs.loadMoreBtn.removeEventListener('click', fetchAndRender);\n      try {\n        onMarkupRender(galleryItemTpl(data.hits));\n        smoothScrollingTo(String(data.hits[0].id));\n        return;\n      } catch (err) {\n        onServerResponse('error', 'Please, enter valid query!');\n      }\n    }\n\n    if (photoFinder.page === 1) {\n      onServerResponse('success', `Hooray! We found ${data.totalHits} images.`);\n    }\n\n    onMarkupRender(galleryItemTpl(data.hits));\n    smoothScrollingTo(String(data.hits[0].id));\n    photoFinder.setNextPage();\n    refs.loadMoreBtn.classList.remove('is-hidden');\n    refs.loadMoreBtn.addEventListener('click', fetchAndRender);\n  });\n}\n\nfunction onNewFetch(value = '') {\n  photoFinder.searcQuery = value;\n  photoFinder.resetPage();\n  refs.gallery.innerHTML = '';\n\n  refs.loadMoreBtn.classList.add('is-hidden');\n  refs.loadMoreBtn.removeEventListener('click', fetchAndRender);\n}\n\nfunction onReset() {\n  refs.searchForm.reset();\n  onNewFetch();\n  refs.message.classList.remove('is-hidden');\n  refs.resetBtn.disabled = true;\n}\n\nfunction smoothScrollingTo(id) {\n  const element = document.getElementById(id);\n  element.scrollIntoView({\n    alignToTop: true,\n    behavior: 'smooth',\n    block: 'center',\n  });\n}\n"],"names":["refs","SearchAPIData","url","key","perPage","__privateAdd","_BASE_URL","_API_KEY","__privateSet","value","__privateGet","SearchPhotoData","imageType","orientation","safesearch","photoFinderOptions","photoFinder","galleryItemTpl","arr","el","onSearch","e","onReset","onServerResponse","onNewFetch","fetchAndRender","cb","message","iziToast","onMarkupRender","list","axios","data","smoothScrollingTo","id"],"mappings":"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"}